(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{265:function(e,t,s){"use strict";s.r(t);var a=s(2),r=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("The key principles of REST involve separating your API into logical resources. These resources are manipulated using HTTP requests where each method has a specific meaning.")]),e._v(" "),s("p",[e._v("The most used ones are (CRUD):")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("POST")]),e._v(" - Create")]),e._v(" "),s("li",[s("strong",[e._v("GET")]),e._v(" - Read")]),e._v(" "),s("li",[s("strong",[e._v("PUT")]),e._v(" - Update")]),e._v(" "),s("li",[s("strong",[e._v("DELETE")]),e._v(" - Delete")])]),e._v(" "),s("p",[e._v("Use 2 base URLs per resource. In your URLs - "),s("strong",[e._v("nouns are good; verbs are bad")]),e._v(".")]),e._v(" "),s("p",[e._v("The endpoints should "),s("strong",[e._v("always")]),e._v(" be plural.")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Resource")]),e._v(" "),s("th",[e._v("POST")]),e._v(" "),s("th",[e._v("GET")]),e._v(" "),s("th",[e._v("PUT")]),e._v(" "),s("th",[e._v("DELETE")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("/dogs")]),e._v(" "),s("td",[e._v("create new dog")]),e._v(" "),s("td",[e._v("list "),s("strong",[e._v("all")]),e._v(" dogs")]),e._v(" "),s("td",[e._v("update "),s("strong",[e._v("all")]),e._v(" dogs")]),e._v(" "),s("td",[e._v("delete "),s("strong",[e._v("all")]),e._v(" dogs")])]),e._v(" "),s("tr",[s("td",[e._v("/dogs/123")]),e._v(" "),s("td",[s("strong",[e._v("ERROR")])]),e._v(" "),s("td",[e._v("show "),s("strong",[e._v("one")]),e._v(" dog")]),e._v(" "),s("td",[e._v("update "),s("strong",[e._v("one")]),e._v(" dog")]),e._v(" "),s("td",[e._v("delete "),s("strong",[e._v("one")]),e._v(" dog")])])])]),e._v(" "),s("h3",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[e._v("#")]),e._v(" Example")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Method")]),e._v(" "),s("th",[e._v("Resource")]),e._v(" "),s("th",[e._v("Result")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("GET")]),e._v(" "),s("td",[e._v("/tickets")]),e._v(" "),s("td",[e._v("Retrieves a list of tickets")])]),e._v(" "),s("tr",[s("td",[e._v("GET")]),e._v(" "),s("td",[e._v("/tickets/12")]),e._v(" "),s("td",[e._v("Retrieves a specific ticket")])]),e._v(" "),s("tr",[s("td",[e._v("POST")]),e._v(" "),s("td",[e._v("/tickets")]),e._v(" "),s("td",[e._v("Creates a new ticket")])]),e._v(" "),s("tr",[s("td",[e._v("PUT")]),e._v(" "),s("td",[e._v("/tickets/12")]),e._v(" "),s("td",[e._v("Updates ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("PATCH")]),e._v(" "),s("td",[e._v("/tickets/12")]),e._v(" "),s("td",[e._v("Partially updates ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("DELETE")]),e._v(" "),s("td",[e._v("/tickets/12")]),e._v(" "),s("td",[e._v("Deletes ticket #12")])])])]),e._v(" "),s("h3",{attrs:{id:"nested-resources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nested-resources","aria-hidden":"true"}},[e._v("#")]),e._v(" Nested resources")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Method")]),e._v(" "),s("th",[e._v("Resource")]),e._v(" "),s("th",[e._v("Result")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("GET")]),e._v(" "),s("td",[e._v("/tickets/12/messages")]),e._v(" "),s("td",[e._v("Retrieves list of messages for ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("GET")]),e._v(" "),s("td",[e._v("/tickets/12/messages/5")]),e._v(" "),s("td",[e._v("Retrieves message #5 for ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("POST")]),e._v(" "),s("td",[e._v("/tickets/12/messages")]),e._v(" "),s("td",[e._v("Creates a new message in ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("PUT")]),e._v(" "),s("td",[e._v("/tickets/12/messages/5")]),e._v(" "),s("td",[e._v("Updates message #5 for ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("PATCH")]),e._v(" "),s("td",[e._v("/tickets/12/messages/5")]),e._v(" "),s("td",[e._v("Partially updates message #5 for ticket #12")])]),e._v(" "),s("tr",[s("td",[e._v("DELETE")]),e._v(" "),s("td",[e._v("/tickets/12/messages/5")]),e._v(" "),s("td",[e._v("Deletes message #5 for ticket #12")])])])]),e._v(" "),s("h3",{attrs:{id:"actions-that-don-t-fit-into-crud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#actions-that-don-t-fit-into-crud","aria-hidden":"true"}},[e._v("#")]),e._v(" Actions that don't fit into CRUD")]),e._v(" "),s("p",[e._v("Restructure the action to appear like a field of a resource. This works if the action doesn't take parameters. For example an activate action could be mapped to a boolean activated field and updated via a PATCH to the resource.")]),e._v(" "),s("p",[e._v("Treat it like a sub-resource with RESTful principles. For example, GitHub's API lets you star a gist with PUT /gists/:id/star and unstar with DELETE /gists/:id/star.")]),e._v(" "),s("p",[e._v("Sometimes you really have no way to map the action to a sensible RESTful structure. For example, a multi-resource search doesn't really make sense to be applied to a specific resource's endpoint. In this case, /search would make the most sense even though it isn't a resource. This is OK - just do what's right from the perspective of the API consumer and make sure it's documented clearly to avoid confusion.")]),e._v(" "),s("h1",{attrs:{id:"ssl-everywhere-all-the-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ssl-everywhere-all-the-time","aria-hidden":"true"}},[e._v("#")]),e._v(" SSL everywhere - all the time")]),e._v(" "),s("p",[e._v("Always use SSL. No exceptions. Today, your web APIs can get accessed from anywhere there is internet (like libraries, coffee shops, airports among others). Not all of these are secure. Many don't encrypt communications at all, allowing for easy eavesdropping or impersonation if authentication credentials are hijacked.")]),e._v(" "),s("p",[e._v("Another advantage of always using SSL is that guaranteed encrypted communications simplifies authentication efforts - you can get away with simple access tokens instead of having to sign each API request.")]),e._v(" "),s("p",[e._v("One thing to watch out for is non-SSL access to API URLs. Do not redirect these to their SSL counterparts. Throw a hard error instead! The last thing you want is for poorly configured clients to send requests to an unencrypted endpoint, just to be silently redirected to the actual encrypted endpoint.")]),e._v(" "),s("h1",{attrs:{id:"result-filtering-sorting-searching"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#result-filtering-sorting-searching","aria-hidden":"true"}},[e._v("#")]),e._v(" Result filtering, sorting & searching")]),e._v(" "),s("p",[e._v("It's best to keep the base resource URLs as lean as possible. Complex result filters, sorting requirements and advanced searching (when restricted to a single type of resource) can all be easily implemented as query parameters on top of the base URL. Let's look at these in more detail:")]),e._v(" "),s("h3",{attrs:{id:"filtering"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filtering","aria-hidden":"true"}},[e._v("#")]),e._v(" Filtering")]),e._v(" "),s("p",[e._v("Use a unique query parameter for each field that implements filtering. For example, when requesting a list of tickets from the /tickets endpoint, you may want to limit these to only those in the open state. This could be accomplished with a request like GET /tickets?state=open. Here, state is a query parameter that implements a filter.")]),e._v(" "),s("h3",{attrs:{id:"sorting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sorting","aria-hidden":"true"}},[e._v("#")]),e._v(" Sorting")]),e._v(" "),s("p",[e._v("Similar to filtering, a generic parameter sort can be used to describe sorting rules. Accommodate complex sorting requirements by letting the sort parameter take in list of comma separated fields, each with a possible unary negative to imply descending sort order. Let's look at some examples:")]),e._v(" "),s("p",[s("code",[e._v("GET /tickets?sort=-priority")]),e._v(" - Retrieves a list of tickets in descending order of priority")]),e._v(" "),s("p",[s("code",[e._v("GET /tickets?sort=-priority,created_at")]),e._v(" - Retrieves a list of tickets in descending order of priority. Within a specific priority, older tickets are ordered first")]),e._v(" "),s("h3",{attrs:{id:"searching"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#searching","aria-hidden":"true"}},[e._v("#")]),e._v(" Searching")]),e._v(" "),s("p",[e._v("Sometimes basic filters aren't enough and you need the power of full text search. Perhaps you're already using ElasticSearch or another Lucene based search technology. When full text search is used as a mechanism of retrieving resource instances for a specific type of resource, it can be exposed on the API as a query parameter on the resource's endpoint. Let's say q. Search queries should be passed straight to the search engine and API output should be in the same format as a normal list result.")]),e._v(" "),s("p",[e._v("Combining these together, we can build queries like:")]),e._v(" "),s("p",[s("code",[e._v("GET /tickets?sort=-updated_at")]),e._v(" - Retrieve recently updated tickets."),s("br"),e._v(" "),s("code",[e._v("GET /tickets?state=closed&sort=-updated_at")]),e._v(" - Retrieve recently closed tickets."),s("br"),e._v(" "),s("code",[e._v("GET /tickets?q=return&state=open&sort=-priority,created_at")]),e._v(" - Retrieve the highest priority open tickets mentioning the word 'return'")]),e._v(" "),s("h1",{attrs:{id:"json-only-responses"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#json-only-responses","aria-hidden":"true"}},[e._v("#")]),e._v(" JSON only responses")]),e._v(" "),s("p",[e._v("It's time to leave XML behind in APIs. It's verbose, it's hard to parse, it's hard to read, its data model isn't compatible with how most programming languages model data and its extendibility advantages are irrelevant when your output representation's primary needs are serialization from an internal representation.")]),e._v(" "),s("h1",{attrs:{id:"snake-case-vs-camelcase-for-field-names"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snake-case-vs-camelcase-for-field-names","aria-hidden":"true"}},[e._v("#")]),e._v(" snake_case vs camelCase for field names")]),e._v(" "),s("p",[e._v('If you\'re using JSON (JavaScript Object Notation) as your primary representation format, the "right" thing to do is to follow JavaScript naming conventions - and that means camelCase for field names!')]),e._v(" "),s("p",[e._v("If you then go the route of building client libraries in various languages, it's best to use idiomatic naming conventions in them - camelCase for C# & Java, snake_case for python & ruby.")]),e._v(" "),s("p",[e._v("Food for thought: I've always felt that snake_case is easier to read than JavaScript's convention of camelCase. I just didn't have any evidence to back up my gut feelings, until now. Based on an eye tracking study on camelCase and snake_case (PDF) from 2010, "),s("strong",[e._v("snake_case is 20% easier to read than camelCase")]),e._v("! That impact on readability would affect API explorability and examples in documentation.")]),e._v(" "),s("p",[e._v("Many popular JSON APIs use snake_case. I suspect this is due to serialization libraries following naming conventions of the underlying language they are using. Perhaps we need to have JSON serialization libraries handle naming convention transformations.")]),e._v(" "),s("h1",{attrs:{id:"pretty-print-by-default-ensure-gzip-is-supported"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pretty-print-by-default-ensure-gzip-is-supported","aria-hidden":"true"}},[e._v("#")]),e._v(" Pretty print by default & ensure gzip is supported")]),e._v(" "),s("p",[e._v("An API that provides white-space compressed output isn't very fun to look at from a browser. Although some sort of query parameter (like ?pretty=true) could be provided to enable pretty printing, an API that pretty prints by default is much more approachable. The cost of the extra data transfer is negligible, especially when you compare to the cost of not implementing gzip.")]),e._v(" "),s("p",[e._v("Consider some use cases: What if an API consumer is debugging and has their code print out data it received from the API - It will be readable by default. Or if the consumer grabbed the URL their code was generating and hit it directly from the browser - it will be readable by default. These are small things. Small things that make an API pleasant to use!")]),e._v(" "),s("h3",{attrs:{id:"but-what-about-all-the-extra-data-transfer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#but-what-about-all-the-extra-data-transfer","aria-hidden":"true"}},[e._v("#")]),e._v(" But what about all the extra data transfer?")]),e._v(" "),s("p",[e._v("Let's look at this with a real world example. I've pulled some data from GitHub's API, which uses pretty print by default. I'll also be doing some gzip comparisons:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" https://api.github.com/users/veesahni "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" with-whitespace.txt\n$ ruby -r json -e "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'puts JSON JSON.parse(STDIN.read)'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v(" with-whitespace.txt "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" without-whitespace.txt\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("gzip")]),e._v(" -c with-whitespace.txt "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" with-whitespace.txt.gz\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("gzip")]),e._v(" -c without-whitespace.txt "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" without-whitespace.txt.gz\n")])])]),s("p",[e._v("The output files have the following sizes:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("without-whitespace.txt - 1252 bytes  \nwith-whitespace.txt - 1369 bytes  \nwithout-whitespace.txt.gz - 496 bytes  \nwith-whitespace.txt.gz - 509 bytes  \n")])])]),s("p",[e._v("In this example, the whitespace increased the output size by 8.5% when gzip is not in play and 2.6% when gzip is in play. On the other hand, the act of gzipping in itself provided over 60% in bandwidth savings. Since the cost of pretty printing is relatively small, it's best to pretty print by default and ensure gzip compression is supported!")]),e._v(" "),s("p",[e._v("To further hammer in this point, Twitter found that there was an 80% savings (in some cases) when enabling gzip compression on their Streaming API. Stack Exchange went as far as to never return a response that's not compressed!")]),e._v(" "),s("h1",{attrs:{id:"authentication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authentication","aria-hidden":"true"}},[e._v("#")]),e._v(" Authentication")]),e._v(" "),s("p",[e._v("A RESTful API should be stateless. This means that request authentication should not depend on cookies or sessions. Instead, each request should come with some sort authentication credentials.")]),e._v(" "),s("p",[e._v("By always using SSL, the authentication credentials can be simplified to a randomly generated access token that is delivered in the user name field of HTTP Basic Auth. The great thing about this is that it's completely browser explorable - the browser will just popup a prompt asking for credentials if it receives a 401 Unauthorized status code from the server.")]),e._v(" "),s("p",[e._v("However, this token-over-basic-auth method of authentication is only acceptable in cases where it's practical to have the user copy a token from an administration interface to the API consumer environment. In cases where this isn't possible, OAuth 2 should be used to provide secure token transfer to a third party. OAuth 2 uses Bearer tokens & also depends on SSL for its underlying transport encryption.")]),e._v(" "),s("p",[e._v("An API that needs to support JSONP will need a third method of authentication, as JSONP requests cannot send HTTP Basic Auth credentials or Bearer tokens. In this case, a special query parameter access_token can be used. Note: there is an inherent security issue in using a query parameter for the token as most web servers store query parameters in server logs.")]),e._v(" "),s("p",[e._v("For what it's worth, all three methods above are just ways to transport the token across the API boundary. The actual underlying token itself could be identical.")]),e._v(" "),s("h1",{attrs:{id:"http-status-codes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-status-codes","aria-hidden":"true"}},[e._v("#")]),e._v(" HTTP status codes")]),e._v(" "),s("p",[e._v("HTTP defines a bunch of meaningful status codes that can be returned from your API. These can be leveraged to help the API consumers route their responses accordingly. I've curated a short list of the ones that you definitely should be using:")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Code")]),e._v(" "),s("th",[e._v("Message")]),e._v(" "),s("th",[e._v("Meaning")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("200")]),e._v(" "),s("td",[e._v("OK")]),e._v(" "),s("td",[e._v("Response to a successful GET, PUT, PATCH or DELETE. Can also be used for a POST that doesn't result in a creation.")])]),e._v(" "),s("tr",[s("td",[e._v("201")]),e._v(" "),s("td",[e._v("Created")]),e._v(" "),s("td",[e._v("Response to a POST that results in a creation. Should be combined with a Location header pointing to the location of the new resource")])]),e._v(" "),s("tr",[s("td",[e._v("204")]),e._v(" "),s("td",[e._v("No Content")]),e._v(" "),s("td",[e._v("Response to a successful request that won't be returning a body (like a DELETE request)")])]),e._v(" "),s("tr",[s("td",[e._v("304")]),e._v(" "),s("td",[e._v("Not Modified")]),e._v(" "),s("td",[e._v("Used when HTTP caching headers are in play")])]),e._v(" "),s("tr",[s("td",[e._v("400")]),e._v(" "),s("td",[e._v("Bad Request")]),e._v(" "),s("td",[e._v("The request is malformed, such as if the body does not parse")])]),e._v(" "),s("tr",[s("td",[e._v("401")]),e._v(" "),s("td",[e._v("Unauthorized")]),e._v(" "),s("td",[e._v("When no or invalid authentication details are provided. Also useful to trigger an auth popup if the API is used from a browser")])]),e._v(" "),s("tr",[s("td",[e._v("403")]),e._v(" "),s("td",[e._v("Forbidden")]),e._v(" "),s("td",[e._v("When authentication succeeded but authenticated user doesn't have access to the resource")])]),e._v(" "),s("tr",[s("td",[e._v("404")]),e._v(" "),s("td",[e._v("Not Found")]),e._v(" "),s("td",[e._v("When a non-existent resource is requested")])]),e._v(" "),s("tr",[s("td",[e._v("405")]),e._v(" "),s("td",[e._v("Method Not Allowed")]),e._v(" "),s("td",[e._v("When an HTTP method is being requested that isn't allowed for the authenticated user")])]),e._v(" "),s("tr",[s("td",[e._v("410")]),e._v(" "),s("td",[e._v("Gone")]),e._v(" "),s("td",[e._v("Indicates that the resource at this end point is no longer available. Useful as a blanket response for old API versions")])]),e._v(" "),s("tr",[s("td",[e._v("415")]),e._v(" "),s("td",[e._v("Unsupported Media Type")]),e._v(" "),s("td",[e._v("If incorrect content type was provided as part of the request")])]),e._v(" "),s("tr",[s("td",[e._v("422")]),e._v(" "),s("td",[e._v("Unprocessable Entity")]),e._v(" "),s("td",[e._v("Used for validation errors")])]),e._v(" "),s("tr",[s("td",[e._v("429")]),e._v(" "),s("td",[e._v("Too Many Requests")]),e._v(" "),s("td",[e._v("When a request is rejected due to rate limiting")])])])])])},[],!1,null,null,null);t.default=r.exports}}]);
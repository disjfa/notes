<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Elm | Full-stack web development notes.</title>
    <meta name="description" content="Full-stack web development notes.">
    
    
    <link rel="preload" href="/notes/assets/css/0.styles.69480afa.css" as="style"><link rel="preload" href="/notes/assets/js/app.b2f0b337.js" as="script"><link rel="preload" href="/notes/assets/js/2.1225d179.js" as="script"><link rel="preload" href="/notes/assets/js/6.04dbe20d.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.ad79507a.js"><link rel="prefetch" href="/notes/assets/js/11.c1cf1b66.js"><link rel="prefetch" href="/notes/assets/js/12.13036d52.js"><link rel="prefetch" href="/notes/assets/js/13.7938725b.js"><link rel="prefetch" href="/notes/assets/js/14.1de88fe6.js"><link rel="prefetch" href="/notes/assets/js/15.8efffe63.js"><link rel="prefetch" href="/notes/assets/js/16.6e436b02.js"><link rel="prefetch" href="/notes/assets/js/17.19a8b946.js"><link rel="prefetch" href="/notes/assets/js/18.ee0c949d.js"><link rel="prefetch" href="/notes/assets/js/19.4b320e7c.js"><link rel="prefetch" href="/notes/assets/js/20.08ab0b67.js"><link rel="prefetch" href="/notes/assets/js/21.b99757f6.js"><link rel="prefetch" href="/notes/assets/js/22.00f309fb.js"><link rel="prefetch" href="/notes/assets/js/23.ce26102d.js"><link rel="prefetch" href="/notes/assets/js/24.b0410150.js"><link rel="prefetch" href="/notes/assets/js/25.8d753f87.js"><link rel="prefetch" href="/notes/assets/js/26.18e891e6.js"><link rel="prefetch" href="/notes/assets/js/27.7d7999d4.js"><link rel="prefetch" href="/notes/assets/js/28.9774fd5a.js"><link rel="prefetch" href="/notes/assets/js/29.c8a41031.js"><link rel="prefetch" href="/notes/assets/js/3.50d7592f.js"><link rel="prefetch" href="/notes/assets/js/30.97f18ff4.js"><link rel="prefetch" href="/notes/assets/js/31.1a22d7ad.js"><link rel="prefetch" href="/notes/assets/js/32.3111817b.js"><link rel="prefetch" href="/notes/assets/js/33.6efec194.js"><link rel="prefetch" href="/notes/assets/js/34.dda5567c.js"><link rel="prefetch" href="/notes/assets/js/35.40a56c44.js"><link rel="prefetch" href="/notes/assets/js/36.458d1789.js"><link rel="prefetch" href="/notes/assets/js/37.9e76c86f.js"><link rel="prefetch" href="/notes/assets/js/38.ea35f119.js"><link rel="prefetch" href="/notes/assets/js/39.474b3651.js"><link rel="prefetch" href="/notes/assets/js/4.5850f364.js"><link rel="prefetch" href="/notes/assets/js/40.9b2812bd.js"><link rel="prefetch" href="/notes/assets/js/41.b2ed6f89.js"><link rel="prefetch" href="/notes/assets/js/42.bedea5a6.js"><link rel="prefetch" href="/notes/assets/js/43.52d01c0b.js"><link rel="prefetch" href="/notes/assets/js/44.bf6db40e.js"><link rel="prefetch" href="/notes/assets/js/45.a6ddf2fb.js"><link rel="prefetch" href="/notes/assets/js/46.ccf7223f.js"><link rel="prefetch" href="/notes/assets/js/47.6b608624.js"><link rel="prefetch" href="/notes/assets/js/48.02d66f09.js"><link rel="prefetch" href="/notes/assets/js/49.35cdabf7.js"><link rel="prefetch" href="/notes/assets/js/5.4fdd094a.js"><link rel="prefetch" href="/notes/assets/js/50.8e046486.js"><link rel="prefetch" href="/notes/assets/js/51.c23cdab9.js"><link rel="prefetch" href="/notes/assets/js/52.a0c473fb.js"><link rel="prefetch" href="/notes/assets/js/53.9d5c6032.js"><link rel="prefetch" href="/notes/assets/js/54.279ef24c.js"><link rel="prefetch" href="/notes/assets/js/55.f263bef6.js"><link rel="prefetch" href="/notes/assets/js/56.e689e4b6.js"><link rel="prefetch" href="/notes/assets/js/7.64d3e5cf.js"><link rel="prefetch" href="/notes/assets/js/8.a6fbdd51.js"><link rel="prefetch" href="/notes/assets/js/9.0b25e1bc.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.69480afa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Full-stack web development notes.</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/8483/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/8483/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/notes/" class="sidebar-link">Introduction</a></li><li><a href="/notes/topics/algos.html" class="sidebar-link">Algos</a></li><li><a href="/notes/topics/bash.html" class="sidebar-link">Bash</a></li><li><a href="/notes/topics/dom.html" class="sidebar-link">Dom</a></li><li><a href="/notes/topics/express.html" class="sidebar-link">Express</a></li><li><a href="/notes/topics/mssql.html" class="sidebar-link">Mssql</a></li><li><a href="/notes/topics/raspberrypi.html" class="sidebar-link">Raspberrypi</a></li><li><a href="/notes/topics/testing.html" class="sidebar-link">Testing</a></li><li><a href="/notes/topics/webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/notes/topics/ansible.html" class="sidebar-link">Ansible</a></li><li><a href="/notes/topics/caching.html" class="sidebar-link">Caching</a></li><li><a href="/notes/topics/electricity.html" class="sidebar-link">Electricity</a></li><li><a href="/notes/topics/filesystem.html" class="sidebar-link">Filesystem</a></li><li><a href="/notes/topics/mysql.html" class="sidebar-link">Mysql</a></li><li><a href="/notes/topics/react.html" class="sidebar-link">React</a></li><li><a href="/notes/topics/tmux.html" class="sidebar-link">Tmux</a></li><li><a href="/notes/topics/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/notes/topics/compression.html" class="sidebar-link">Compression</a></li><li><a href="/notes/topics/electronics.html" class="sidebar-link">Electronics</a></li><li><a href="/notes/topics/fp.html" class="sidebar-link">Fp</a></li><li><a href="/notes/topics/networking.html" class="sidebar-link">Networking</a></li><li><a href="/notes/topics/restful.html" class="sidebar-link">Restful</a></li><li><a href="/notes/topics/users.html" class="sidebar-link">Users</a></li><li><a href="/notes/topics/arduino.html" class="sidebar-link">Arduino</a></li><li><a href="/notes/topics/config.html" class="sidebar-link">Config</a></li><li><a href="/notes/topics/electron.html" class="sidebar-link">Electron</a></li><li><a href="/notes/topics/git.html" class="sidebar-link">Git</a></li><li><a href="/notes/topics/nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/notes/topics/rfid.html" class="sidebar-link">Rfid</a></li><li><a href="/notes/topics/vagrant.html" class="sidebar-link">Vagrant</a></li><li><a href="/notes/topics/async.html" class="sidebar-link">Async</a></li><li><a href="/notes/topics/csharp.html" class="sidebar-link">Csharp</a></li><li><a href="/notes/topics/elm.html" class="active sidebar-link">Elm</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/topics/elm.html#_1-model" class="sidebar-link">1. Model</a></li><li class="sidebar-sub-header"><a href="/notes/topics/elm.html#_2-update" class="sidebar-link">2. Update</a></li><li class="sidebar-sub-header"><a href="/notes/topics/elm.html#_3-view" class="sidebar-link">3. View</a></li></ul></li><li><a href="/notes/topics/javascript.html" class="sidebar-link">Javascript</a></li><li><a href="/notes/topics/nodemcu.html" class="sidebar-link">Nodemcu</a></li><li><a href="/notes/topics/security.html" class="sidebar-link">Security</a></li><li><a href="/notes/topics/vim.html" class="sidebar-link">Vim</a></li><li><a href="/notes/topics/babel.html" class="sidebar-link">Babel</a></li><li><a href="/notes/topics/css.html" class="sidebar-link">Css</a></li><li><a href="/notes/topics/es6.html" class="sidebar-link">Es6</a></li><li><a href="/notes/topics/linux.html" class="sidebar-link">Linux</a></li><li><a href="/notes/topics/node.html" class="sidebar-link">Node</a></li><li><a href="/notes/topics/ssh.html" class="sidebar-link">Ssh</a></li><li><a href="/notes/topics/vm.html" class="sidebar-link">Vm</a></li><li><a href="/notes/topics/base.html" class="sidebar-link">Base</a></li><li><a href="/notes/topics/docker.html" class="sidebar-link">Docker</a></li><li><a href="/notes/topics/excel.html" class="sidebar-link">Excel</a></li><li><a href="/notes/topics/mobile.html" class="sidebar-link">Mobile</a></li><li><a href="/notes/topics/oop.html" class="sidebar-link">Oop</a></li><li><a href="/notes/topics/systemd.html" class="sidebar-link">Systemd</a></li><li><a href="/notes/topics/vscode.html" class="sidebar-link">Vscode</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="elm"><a href="#elm" aria-hidden="true" class="header-anchor">#</a> Elm</h1> <p>Elm code can be tested in the <a href="http://elm-lang.org/examples/hello-html" target="_blank" rel="noopener noreferrer">sandbox app<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> without installation.</p> <h1 id="install"><a href="#install" aria-hidden="true" class="header-anchor">#</a> Install</h1> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> -g elm <span class="token comment"># Normal install</span>
<span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> --unsafe-perm -g elm <span class="token comment"># If npm gives you permission errors.</span>
</code></pre></div><p><code>elm-package install elm-lang/PACKAGE_NAME</code> - Install dependencies.</p> <h4 id="alternative"><a href="#alternative" aria-hidden="true" class="header-anchor">#</a> Alternative</h4> <p>Install yarn</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -sS https://dl.yarnpkg.com/debian/pubkey.gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
<span class="token keyword">echo</span> <span class="token string">&quot;deb https://dl.yarnpkg.com/debian/ stable main&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/yarn.list
<span class="token function">sudo</span> <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">yarn</span>
</code></pre></div><p>Install Elm</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">export</span> PATH<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$PATH</span>:<span class="token variable"><span class="token variable">`</span><span class="token function">yarn</span> global bin<span class="token variable">`</span></span>&quot;</span> <span class="token comment"># Add in order to use Elm commands.</span>
<span class="token function">yarn</span> global <span class="token function">add</span> elm
</code></pre></div><h1 id="elm-hello-world"><a href="#elm-hello-world" aria-hidden="true" class="header-anchor">#</a> Elm &quot;Hello World!&quot;</h1> <p>Create the <code>Main.elm</code> file. This, along with all the dependecies will transpile into Javascript in step 3.</p> <div class="language-elm extra-class"><pre class="language-elm"><code><span class="token import_statement"><span class="token keyword">import</span> Html <span class="token keyword">exposing</span> </span><span class="token punctuation">(</span><span class="token hvariable">text</span><span class="token punctuation">)</span>

<span class="token hvariable">main</span> <span class="token operator">=</span>
  <span class="token hvariable">text</span> <span class="token string">&quot;Hello, World!&quot;</span>
</code></pre></div><p>Create the <code>index.html</code> file, which will load the javascript file created in step 3.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
            <span class="token keyword">var</span> app <span class="token operator">=</span> Elm<span class="token punctuation">.</span>Main<span class="token punctuation">.</span><span class="token function">embed</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Compile/transpile the elm code into javascript.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>elm-make Main.elm --output<span class="token operator">=</span>main.js <span class="token comment"># Locations are relative.</span>
</code></pre></div><p>The result from this is the creation of:</p> <ul><li><code>elm-stuff</code> - Holds the dependecies, like <code>node_modules</code>.</li> <li><code>elm-package.json</code> - Lists the dependecies, like <code>package.json</code>.</li> <li><code>main.js</code> - The transpiled elm code, to be used in <code>index.html</code>.</li></ul> <h1 id="build-compile"><a href="#build-compile" aria-hidden="true" class="header-anchor">#</a> Build/Compile</h1> <p><code>elm-make Main.elm --output=../public/main.js</code> - Build</p> <h1 id="app-build-order"><a href="#app-build-order" aria-hidden="true" class="header-anchor">#</a> App Build Order</h1> <ol><li>Connect modules / Navigation</li> <li>Login</li> <li>Saving Token</li> <li>Logout</li> <li>Lock/Control Access to Pages</li> <li>Individual Pages (Modules)</li></ol> <h1 id="the-elm-architecture"><a href="#the-elm-architecture" aria-hidden="true" class="header-anchor">#</a> The Elm Architecture</h1> <p><img src="/notes/assets/img/TEA.033a256c.png" alt="TEA"></p> <p>There are 3 main wiring parts between modules. They happen in the <code>Model</code>, <code>Update</code> and <code>View</code>.</p> <p><img src="/notes/assets/img/elm_arch.31e93bb3.png" alt="TEA"></p> <h1 id="childmodule-elm"><a href="#childmodule-elm" aria-hidden="true" class="header-anchor">#</a> ChildModule.elm</h1> <div class="language-elm extra-class"><pre class="language-elm"><code><span class="token keyword">module</span> <span class="token constant">ChildModule</span> <span class="token keyword">exposing</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Note:</strong> In order to import a module in <code>Main</code>, the source folder (where all the modules are) needs to be added in the <code>elm-package.json</code> file under <code>source-directories</code> like so:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;source-directories&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;src&quot;</span>
    <span class="token punctuation">]</span>
</code></pre></div><h1 id="main-elm"><a href="#main-elm" aria-hidden="true" class="header-anchor">#</a> Main.elm</h1> <h2 id="_1-model"><a href="#_1-model" aria-hidden="true" class="header-anchor">#</a> 1. Model</h2> <p>The <code>Main</code> module doesn't need to know the details of <code>ChildModule</code>'s model. It just needs to know that the <code>ChildModule</code> has a model, which is exposed and can be referenced by using <code>ChildModule.Model</code>. The initial value can be referenced as well with <code>ChildModule.initModel</code>.</p> <p>So we just need to create a <code>childModule</code> field of type <code>ChildModule.Model</code>.</p> <div class="language-elm extra-class"><pre class="language-elm"><code><span class="token import_statement"><span class="token keyword">import</span> ChildModule</span>

<span class="token keyword">type</span> <span class="token keyword">alias</span> <span class="token constant">Model</span> <span class="token operator">=</span>
    <span class="token punctuation">{</span> <span class="token hvariable">page</span> <span class="token operator">:</span> <span class="token constant">Page</span><span class="token punctuation">,</span>
    <span class="token punctuation">,</span> <span class="token hvariable">childModule</span> <span class="token operator">:</span> <span class="token constant">ChildModule.Model</span>
    <span class="token punctuation">}</span>

<span class="token hvariable">initModel</span> <span class="token operator">:</span> <span class="token constant">Model</span>
<span class="token hvariable">initModel</span> <span class="token operator">=</span>
    <span class="token punctuation">{</span> <span class="token hvariable">page</span> <span class="token operator">=</span> <span class="token constant">ChildModulePage</span>
    <span class="token punctuation">,</span> <span class="token hvariable">childModule</span> <span class="token operator">=</span> <span class="token hvariable">ChildModule.initModel</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-update"><a href="#_2-update" aria-hidden="true" class="header-anchor">#</a> 2. Update</h2> <p>When the message is of type <code>ChildModuleMsg</code> i.e. originating from an outside module, we pull out the included message and put it into the identifier <code>cmMsg</code>.</p> <p>The <code>Main</code> module doesn't know how to handle this message directly, but the <code>ChildModule</code>'s <strong>update function</strong> does (for any message in that module), so we just call it to deal with the <code>ChildModule</code>'s <strong>model</strong>.</p> <p>To do this, we update the model by setting the <code>childModule</code> field to the value returned by calling the <code>ChildModule</code>'s <strong>update function</strong> and passing it the two parameters, the <strong>message</strong> <code>cmMsg</code> and the <strong>current model</strong> for the child module <code>model.childModule</code></p> <div class="language-elm extra-class"><pre class="language-elm"><code><span class="token keyword">type</span> <span class="token constant">Msg</span>
    <span class="token operator">=</span> <span class="token constant">ChangePage</span> <span class="token constant">Page</span>
    <span class="token operator">|</span> <span class="token constant">ChildModuleMsg</span> <span class="token hvariable">ChildModule.messages</span>

<span class="token hvariable">update</span> <span class="token operator">:</span> <span class="token constant">Msg</span> <span class="token operator">-&gt;</span> <span class="token constant">Model</span> <span class="token operator">-&gt;</span> <span class="token constant">Model</span>
<span class="token hvariable">update</span> <span class="token hvariable">msg</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
    <span class="token keyword">case</span> <span class="token hvariable">msg</span> <span class="token keyword">of</span>
        <span class="token constant">ChangePage</span> <span class="token hvariable">page</span> <span class="token operator">-&gt;</span>
            <span class="token punctuation">{</span> <span class="token hvariable">model</span> <span class="token operator">|</span> <span class="token hvariable">page</span> <span class="token operator">=</span> <span class="token hvariable">page</span> <span class="token punctuation">}</span>

        <span class="token constant">ChildModuleMsg</span> <span class="token hvariable">cmMsg</span> <span class="token operator">-&gt;</span>
            <span class="token punctuation">{</span> <span class="token hvariable">model</span> <span class="token operator">|</span> <span class="token hvariable">childModule</span> <span class="token operator">=</span> <span class="token hvariable">ChildModule.update</span> <span class="token hvariable">cmMsg</span> <span class="token hvariable">model</span><span class="token punctuation">.</span><span class="token hvariable">childModule</span> <span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-view"><a href="#_3-view" aria-hidden="true" class="header-anchor">#</a> 3. View</h2> <p>This is a <strong>GOTCHA</strong> part due to the different <code>Html Msg</code> types. We need to transform the html capable of generating <code>ChildModule</code> messages into <code>Html</code> capable of generating <code>Main</code> messages by using <code>map</code>.</p> <p>The first parameter for the <code>map</code> function is a transformation function, which is the <code>ChildModuleMsg</code>'s type constructor that acts as a function.</p> <p>The second parameter is the <code>ChildModule</code>'s view function with the <strong>current model</strong> as an argument, hence the tuple.</p> <p><strong>In other words, we are transforming any message coming from the child view, into main messages by using map.</strong></p> <div class="language-elm extra-class"><pre class="language-elm"><code><span class="token hvariable">view</span> <span class="token operator">:</span> <span class="token constant">Model</span> <span class="token operator">-&gt;</span> <span class="token constant">Html</span> <span class="token constant">Msg</span>
<span class="token hvariable">view</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
    <span class="token keyword">let</span>
        <span class="token hvariable">page</span> <span class="token operator">=</span>
            <span class="token keyword">case</span> <span class="token hvariable">model</span><span class="token punctuation">.</span><span class="token hvariable">page</span> <span class="token keyword">of</span>
                <span class="token constant">ChildModulePage</span> <span class="token operator">-&gt;</span>
                    <span class="token hvariable">Html.map</span> <span class="token constant">ChildModuleMsg</span> <span class="token punctuation">(</span><span class="token hvariable">ChildModule.view</span> <span class="token hvariable">model</span><span class="token punctuation">.</span><span class="token hvariable">childModule</span><span class="token punctuation">)</span>
    <span class="token keyword">in</span>
        <span class="token hvariable">div</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">page</span> <span class="token punctuation">]</span>

</code></pre></div><h1 id="coonection-and-navigation"><a href="#coonection-and-navigation" aria-hidden="true" class="header-anchor">#</a> Coonection and Navigation</h1> <p>After creating a <code>ChildModule</code>, exposing it and adding it to <code>elm-package.json</code>'s <code>source-directories</code>, we need to connect the module and navigate between them.</p> <p>The connection is explained in <strong>The Elm Architecture</strong> above.</p> <p>To use the navigation, we need to install the package with <code>elm-package install elm-lang/navigation</code> along with th dependencies and import the package with <code>include Navigation</code>.</p> <p>After that, in the <code>main</code> function, we change the <code>Html.program</code> function call into <code>Navigation.program location</code>.</p> <div class="language-elm extra-class"><pre class="language-elm"><code><span class="token hvariable">main</span> <span class="token operator">:</span> <span class="token constant">Program</span> <span class="token constant">Never</span> <span class="token constant">Model</span> <span class="token constant">Msg</span>
<span class="token hvariable">main</span> <span class="token operator">=</span>
    <span class="token comment">-- Html.program</span>
    <span class="token hvariable">Navigation.program</span> <span class="token hvariable">locationToMsg</span>
    <span class="token punctuation">{</span> <span class="token hvariable">init</span> <span class="token operator">=</span> <span class="token hvariable">init</span>
    <span class="token punctuation">,</span> <span class="token hvariable">update</span> <span class="token operator">=</span> <span class="token hvariable">update</span>
    <span class="token punctuation">,</span> <span class="token hvariable">view</span> <span class="token operator">=</span> <span class="token hvariable">view</span>
    <span class="token punctuation">,</span> <span class="token hvariable">subscriptions</span> <span class="token operator">=</span> <span class="token hvariable">subscriptions</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><code>Navigation.program</code> takes a function as a parameter, which takes a location as a parameter.</p> <p>The <code>locationToMsg</code> is called every time the URL changes. The function takes a <code>Navigation.Location</code> and returns a <code>Msg</code>.</p> <p>This function needs to:</p> <ol><li>Transform the URL hash into a <code>Page</code>.</li> <li>Return the page as part of a <code>Msg</code>.</li> <li>The message is fed back into the <code>update</code> function.</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notes/topics/csharp.html" class="prev">
          Csharp
        </a></span> <span class="next"><a href="/notes/topics/javascript.html">
          Javascript
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.b2f0b337.js" defer></script><script src="/notes/assets/js/2.1225d179.js" defer></script><script src="/notes/assets/js/6.04dbe20d.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Best practices | Full-stack web development notes.</title>
    <meta name="description" content="Full-stack web development notes.">
    
    
    <link rel="preload" href="/notes/assets/css/0.styles.69480afa.css" as="style"><link rel="preload" href="/notes/assets/js/app.b2f0b337.js" as="script"><link rel="preload" href="/notes/assets/js/2.1225d179.js" as="script"><link rel="preload" href="/notes/assets/js/38.ea35f119.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.ad79507a.js"><link rel="prefetch" href="/notes/assets/js/11.c1cf1b66.js"><link rel="prefetch" href="/notes/assets/js/12.13036d52.js"><link rel="prefetch" href="/notes/assets/js/13.7938725b.js"><link rel="prefetch" href="/notes/assets/js/14.1de88fe6.js"><link rel="prefetch" href="/notes/assets/js/15.8efffe63.js"><link rel="prefetch" href="/notes/assets/js/16.6e436b02.js"><link rel="prefetch" href="/notes/assets/js/17.19a8b946.js"><link rel="prefetch" href="/notes/assets/js/18.ee0c949d.js"><link rel="prefetch" href="/notes/assets/js/19.4b320e7c.js"><link rel="prefetch" href="/notes/assets/js/20.08ab0b67.js"><link rel="prefetch" href="/notes/assets/js/21.b99757f6.js"><link rel="prefetch" href="/notes/assets/js/22.00f309fb.js"><link rel="prefetch" href="/notes/assets/js/23.ce26102d.js"><link rel="prefetch" href="/notes/assets/js/24.b0410150.js"><link rel="prefetch" href="/notes/assets/js/25.8d753f87.js"><link rel="prefetch" href="/notes/assets/js/26.18e891e6.js"><link rel="prefetch" href="/notes/assets/js/27.7d7999d4.js"><link rel="prefetch" href="/notes/assets/js/28.9774fd5a.js"><link rel="prefetch" href="/notes/assets/js/29.c8a41031.js"><link rel="prefetch" href="/notes/assets/js/3.50d7592f.js"><link rel="prefetch" href="/notes/assets/js/30.97f18ff4.js"><link rel="prefetch" href="/notes/assets/js/31.1a22d7ad.js"><link rel="prefetch" href="/notes/assets/js/32.3111817b.js"><link rel="prefetch" href="/notes/assets/js/33.6efec194.js"><link rel="prefetch" href="/notes/assets/js/34.dda5567c.js"><link rel="prefetch" href="/notes/assets/js/35.40a56c44.js"><link rel="prefetch" href="/notes/assets/js/36.458d1789.js"><link rel="prefetch" href="/notes/assets/js/37.9e76c86f.js"><link rel="prefetch" href="/notes/assets/js/39.474b3651.js"><link rel="prefetch" href="/notes/assets/js/4.5850f364.js"><link rel="prefetch" href="/notes/assets/js/40.9b2812bd.js"><link rel="prefetch" href="/notes/assets/js/41.b2ed6f89.js"><link rel="prefetch" href="/notes/assets/js/42.bedea5a6.js"><link rel="prefetch" href="/notes/assets/js/43.52d01c0b.js"><link rel="prefetch" href="/notes/assets/js/44.bf6db40e.js"><link rel="prefetch" href="/notes/assets/js/45.a6ddf2fb.js"><link rel="prefetch" href="/notes/assets/js/46.ccf7223f.js"><link rel="prefetch" href="/notes/assets/js/47.6b608624.js"><link rel="prefetch" href="/notes/assets/js/48.02d66f09.js"><link rel="prefetch" href="/notes/assets/js/49.35cdabf7.js"><link rel="prefetch" href="/notes/assets/js/5.4fdd094a.js"><link rel="prefetch" href="/notes/assets/js/50.8e046486.js"><link rel="prefetch" href="/notes/assets/js/51.c23cdab9.js"><link rel="prefetch" href="/notes/assets/js/52.a0c473fb.js"><link rel="prefetch" href="/notes/assets/js/53.9d5c6032.js"><link rel="prefetch" href="/notes/assets/js/54.279ef24c.js"><link rel="prefetch" href="/notes/assets/js/55.f263bef6.js"><link rel="prefetch" href="/notes/assets/js/56.e689e4b6.js"><link rel="prefetch" href="/notes/assets/js/6.04dbe20d.js"><link rel="prefetch" href="/notes/assets/js/7.64d3e5cf.js"><link rel="prefetch" href="/notes/assets/js/8.a6fbdd51.js"><link rel="prefetch" href="/notes/assets/js/9.0b25e1bc.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.69480afa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Full-stack web development notes.</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/8483/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/8483/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/notes/" class="sidebar-link">Introduction</a></li><li><a href="/notes/topics/algos.html" class="sidebar-link">Algos</a></li><li><a href="/notes/topics/bash.html" class="sidebar-link">Bash</a></li><li><a href="/notes/topics/dom.html" class="sidebar-link">Dom</a></li><li><a href="/notes/topics/express.html" class="sidebar-link">Express</a></li><li><a href="/notes/topics/mssql.html" class="sidebar-link">Mssql</a></li><li><a href="/notes/topics/raspberrypi.html" class="sidebar-link">Raspberrypi</a></li><li><a href="/notes/topics/testing.html" class="sidebar-link">Testing</a></li><li><a href="/notes/topics/webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/notes/topics/ansible.html" class="sidebar-link">Ansible</a></li><li><a href="/notes/topics/caching.html" class="sidebar-link">Caching</a></li><li><a href="/notes/topics/electricity.html" class="sidebar-link">Electricity</a></li><li><a href="/notes/topics/filesystem.html" class="sidebar-link">Filesystem</a></li><li><a href="/notes/topics/mysql.html" class="active sidebar-link">Mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#permissions" class="sidebar-link">Permissions</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#change-password" class="sidebar-link">Change password</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#tables" class="sidebar-link">Tables</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#foreign-keys" class="sidebar-link">Foreign Keys</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#records" class="sidebar-link">Records</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#restore" class="sidebar-link">Restore</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#creating-a-database" class="sidebar-link">Creating a Database</a></li><li class="sidebar-sub-header"><a href="/notes/topics/mysql.html#terminology" class="sidebar-link">Terminology</a></li></ul></li><li><a href="/notes/topics/react.html" class="sidebar-link">React</a></li><li><a href="/notes/topics/tmux.html" class="sidebar-link">Tmux</a></li><li><a href="/notes/topics/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/notes/topics/compression.html" class="sidebar-link">Compression</a></li><li><a href="/notes/topics/electronics.html" class="sidebar-link">Electronics</a></li><li><a href="/notes/topics/fp.html" class="sidebar-link">Fp</a></li><li><a href="/notes/topics/networking.html" class="sidebar-link">Networking</a></li><li><a href="/notes/topics/restful.html" class="sidebar-link">Restful</a></li><li><a href="/notes/topics/users.html" class="sidebar-link">Users</a></li><li><a href="/notes/topics/arduino.html" class="sidebar-link">Arduino</a></li><li><a href="/notes/topics/config.html" class="sidebar-link">Config</a></li><li><a href="/notes/topics/electron.html" class="sidebar-link">Electron</a></li><li><a href="/notes/topics/git.html" class="sidebar-link">Git</a></li><li><a href="/notes/topics/nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/notes/topics/rfid.html" class="sidebar-link">Rfid</a></li><li><a href="/notes/topics/vagrant.html" class="sidebar-link">Vagrant</a></li><li><a href="/notes/topics/async.html" class="sidebar-link">Async</a></li><li><a href="/notes/topics/csharp.html" class="sidebar-link">Csharp</a></li><li><a href="/notes/topics/elm.html" class="sidebar-link">Elm</a></li><li><a href="/notes/topics/javascript.html" class="sidebar-link">Javascript</a></li><li><a href="/notes/topics/nodemcu.html" class="sidebar-link">Nodemcu</a></li><li><a href="/notes/topics/security.html" class="sidebar-link">Security</a></li><li><a href="/notes/topics/vim.html" class="sidebar-link">Vim</a></li><li><a href="/notes/topics/babel.html" class="sidebar-link">Babel</a></li><li><a href="/notes/topics/css.html" class="sidebar-link">Css</a></li><li><a href="/notes/topics/es6.html" class="sidebar-link">Es6</a></li><li><a href="/notes/topics/linux.html" class="sidebar-link">Linux</a></li><li><a href="/notes/topics/node.html" class="sidebar-link">Node</a></li><li><a href="/notes/topics/ssh.html" class="sidebar-link">Ssh</a></li><li><a href="/notes/topics/vm.html" class="sidebar-link">Vm</a></li><li><a href="/notes/topics/base.html" class="sidebar-link">Base</a></li><li><a href="/notes/topics/docker.html" class="sidebar-link">Docker</a></li><li><a href="/notes/topics/excel.html" class="sidebar-link">Excel</a></li><li><a href="/notes/topics/mobile.html" class="sidebar-link">Mobile</a></li><li><a href="/notes/topics/oop.html" class="sidebar-link">Oop</a></li><li><a href="/notes/topics/systemd.html" class="sidebar-link">Systemd</a></li><li><a href="/notes/topics/vscode.html" class="sidebar-link">Vscode</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="best-practices"><a href="#best-practices" aria-hidden="true" class="header-anchor">#</a> Best practices</h1> <h3 id="naming-convention"><a href="#naming-convention" aria-hidden="true" class="header-anchor">#</a> Naming Convention</h3> <ul><li><strong>Singular form</strong>. Both tables and columns.</li> <li>Be consistent! Doesn't matter if you use camelCase or snake_case. Use whatever the front-end uses.</li> <li>Avoid abbreviations or prefixes.</li></ul> <h3 id="performance"><a href="#performance" aria-hidden="true" class="header-anchor">#</a> Performance</h3> <ul><li>Try to stick to <code>where</code> clauses on indexed columns, instead of <code>like</code>.</li> <li>Don't go crazy with <code>joins</code>.</li> <li>Don't use varchar(255). Try to use the lowest number possible.</li></ul> <h1 id="install-mysql"><a href="#install-mysql" aria-hidden="true" class="header-anchor">#</a> Install MySQL</h1> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mysql-server

<span class="token function">sudo</span> mysql_secure_installation
<span class="token comment"># Change root password to more secure.</span>
<span class="token comment"># Remove anonymous users.</span>
<span class="token comment"># Disable remote root login. Root should only connect via `localhost`.</span>
<span class="token comment"># Remove test database and access to it.</span>
<span class="token comment"># Reload privilege tables.</span>

systemctl restart mysql
<span class="token comment"># sudo service mysql start</span>
</code></pre></div><h1 id="command-line"><a href="#command-line" aria-hidden="true" class="header-anchor">#</a> Command line</h1> <p><a href="https://www.digitalocean.com/community/tutorials/a-basic-mysql-tutorial" target="_blank" rel="noopener noreferrer">Digital Ocean tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
Commands are <strong>not</strong> case sensitive, but table names are. <strong>All commands must end with</strong> <code>;</code>.</p> <p><code>sudo mysql -u root -p</code> - Log into MySQL as root, with password.<br> <code>;</code> - Execute/End current command.<br> <code>ENTER</code> - Starts a new line. <code>;</code> is expected.</p> <h1 id="users"><a href="#users" aria-hidden="true" class="header-anchor">#</a> Users</h1> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Log in as new user, with password.</span>
<span class="token function">sudo</span> mysql -u user -p
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- Create user</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'user'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'password'</span><span class="token punctuation">;</span>

<span class="token comment">-- Give access to certain areas. In this case, it's for everything as *.* stands for dbName.tableName i.e. all of them.</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span> <span class="token punctuation">.</span> <span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'user'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token comment">-- Reload the privileges.</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>

<span class="token comment">-- List all users.</span>
<span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Show current user.</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Delete user.</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'user'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="permissions"><a href="#permissions" aria-hidden="true" class="header-anchor">#</a> Permissions</h2> <p><strong>Options:</strong> ALL PRIVILEGES, CREATE, DROP, DELETE, INSERT, SELECT, UPDATE, GRANT OPTION (User can give permissions).</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- Give a specific permission, for a specific table.</span>
<span class="token keyword">GRANT</span> permission <span class="token keyword">ON</span> dbName<span class="token punctuation">.</span>tableName <span class="token keyword">TO</span> <span class="token string">'&lt;user&gt;'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token comment">-- Remove a permission.</span>
<span class="token keyword">REVOKE</span> permission <span class="token keyword">ON</span> dbName<span class="token punctuation">.</span>tableName <span class="token keyword">FROM</span> <span class="token string">'&lt;user&gt;'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="change-password"><a href="#change-password" aria-hidden="true" class="header-anchor">#</a> Change password</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'MyNewPass'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="database"><a href="#database" aria-hidden="true" class="header-anchor">#</a> Database</h1> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span>              <span class="token comment">-- List databases.</span>
<span class="token keyword">SELECT</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">-- Show current database.</span>
<span class="token keyword">USE</span> dbName<span class="token punctuation">;</span>                 <span class="token comment">-- Select a database.</span>

<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> dbName<span class="token punctuation">;</span>     <span class="token comment">-- Create a database.</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> dbName<span class="token punctuation">;</span>       <span class="token comment">-- Delete a database.</span>
</code></pre></div><h2 id="tables"><a href="#tables" aria-hidden="true" class="header-anchor">#</a> Tables</h2> <h3 id="create"><a href="#create" aria-hidden="true" class="header-anchor">#</a> Create</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span>                 <span class="token comment">-- List all tables.</span>
<span class="token keyword">DESCRIBE</span> tableName<span class="token punctuation">;</span>         <span class="token comment">-- Display columns and types.</span>

<span class="token comment">-- Shows the query that creates the table.</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tableName<span class="token punctuation">;</span>

<span class="token comment">-- Create a table.</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tableName <span class="token punctuation">(</span>column1 DATATYPE<span class="token punctuation">,</span> column2 DATATYPE<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Example</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> <span class="token comment">-- Important</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    pass <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="modify"><a href="#modify" aria-hidden="true" class="header-anchor">#</a> Modify</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- Rename a table.</span>
<span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> tableName1 <span class="token keyword">TO</span> tableName2<span class="token punctuation">;</span>

<span class="token comment">-- Add a column at end.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tableName <span class="token keyword">ADD</span> columnName DATATYPE<span class="token punctuation">;</span>

<span class="token comment">-- Add a column at certain location.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tableName <span class="token keyword">ADD</span> columnName DATATYPE <span class="token keyword">AFTER</span> columnName<span class="token punctuation">;</span>

<span class="token comment">-- Delete a column.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tableName <span class="token keyword">DROP</span> columnName<span class="token punctuation">;</span>

<span class="token comment">-- Change a column name. Has to be backticks.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tableName CHANGE <span class="token punctuation">`</span>oldcolname<span class="token punctuation">`</span> <span class="token punctuation">`</span>newcolname<span class="token punctuation">`</span> datatype<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Reset AUTO_INCREMENT id. For this to work, the table must be empty.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="delete"><a href="#delete" aria-hidden="true" class="header-anchor">#</a> Delete</h3> <p>Be <strong>VERY</strong> careful with this one. <strong>ALWAYS</strong> select first, delete second.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> tableName<span class="token punctuation">;</span>
</code></pre></div><h2 id="foreign-keys"><a href="#foreign-keys" aria-hidden="true" class="header-anchor">#</a> Foreign Keys</h2> <p>They are used for <strong>data integrity</strong> i.e. they prevent entering values that don't exist in the linked table (gives an error).</p> <p>A FOREIGN KEY is a field in one table that refers to the PRIMARY KEY in another table.</p> <p>The table containing the foreign key is called the child table, and the table containing the candidate key is called the referenced or parent table.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- Add foreign key.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table1 <span class="token keyword">ADD</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>idColumn<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> table2<span class="token punctuation">(</span>idColumn<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Remove foreign key.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tableName <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> FK_columnName<span class="token punctuation">;</span>

<span class="token comment">-- Foreign key definition during table creation.</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tableName<span class="token punctuation">;</span>

<span class="token comment">-- List foreign keys.</span>
<span class="token keyword">SELECT</span>
    tableName<span class="token punctuation">,</span>
    COLUMNNAME<span class="token punctuation">,</span>
    CONSTRAINT_NAME<span class="token punctuation">,</span>
    REFERENCED_tableName<span class="token punctuation">,</span>
    REFERENCED_COLUMNNAME
<span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span>KEY_COLUMN_USAGE
<span class="token keyword">WHERE</span>
    REFERENCED_tableName <span class="token operator">=</span> <span class="token string">'my_table'</span><span class="token punctuation">;</span>

<span class="token comment">-- One-liner.</span>
<span class="token keyword">SELECT</span> tableName<span class="token punctuation">,</span> COLUMNNAME<span class="token punctuation">,</span> CONSTRAINT_NAME<span class="token punctuation">,</span> REFERENCED_tableName<span class="token punctuation">,</span> REFERENCED_COLUMNNAME <span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span>KEY_COLUMN_USAGE <span class="token keyword">WHERE</span> REFERENCED_tableName <span class="token operator">=</span> <span class="token string">'my_table'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="records"><a href="#records" aria-hidden="true" class="header-anchor">#</a> Records</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- Get records.</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tableName<span class="token punctuation">;</span>

<span class="token comment">-- Add record.</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tableName <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Example</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span> <span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'pass'</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'john'</span><span class="token punctuation">,</span> <span class="token string">'abc123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Modify record.</span>
<span class="token keyword">UPDATE</span> tableName <span class="token keyword">SET</span> columnName <span class="token operator">=</span> <span class="token string">'value'</span> <span class="token keyword">WHERE</span> criteria<span class="token punctuation">;</span>

<span class="token comment">-- Example</span>
<span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'Mike'</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- Delete record.</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> tableName <span class="token keyword">WHERE</span> columnName <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token keyword">value</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="insert-on-duplicate-key-update"><a href="#insert-on-duplicate-key-update" aria-hidden="true" class="header-anchor">#</a> INSERT ON DUPLICATE KEY UPDATE</h3> <p>Insert if <code>id</code> doesn't exit. Else, update the data at said <code>id</code>.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> columnName  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> foo          <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> bar          <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> baz          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">table</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> columnName<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span> 
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'qux'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'hex'</span><span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">DUPLICATE</span> <span class="token keyword">KEY</span> <span class="token keyword">UPDATE</span> 
    columnName <span class="token operator">=</span> <span class="token keyword">values</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> columnName  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> qux          <span class="token operator">|</span> <span class="token comment">-- Value updated</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> bar          <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> baz          <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> hex          <span class="token operator">|</span> <span class="token comment">-- Inserted row</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
</code></pre></div><h1 id="size"><a href="#size" aria-hidden="true" class="header-anchor">#</a> Size</h1> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- Check the size of all the databases</span>
<span class="token keyword">SELECT</span> table_schema <span class="token keyword">AS</span> <span class="token string">&quot;Database&quot;</span><span class="token punctuation">,</span> 
<span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token function">SUM</span><span class="token punctuation">(</span>data_length <span class="token operator">+</span> index_length<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;Size (MB)&quot;</span> 
<span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span><span class="token keyword">TABLES</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> table_schema<span class="token punctuation">;</span>

<span class="token comment">-- Check the size of all the tables in a database</span>
<span class="token keyword">SELECT</span> tableName <span class="token keyword">AS</span> <span class="token string">&quot;Table&quot;</span><span class="token punctuation">,</span>
<span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data_length <span class="token operator">+</span> index_length<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;Size (MB)&quot;</span>
<span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span><span class="token keyword">TABLES</span>
<span class="token keyword">WHERE</span> table_schema <span class="token operator">=</span> <span class="token string">&quot;database_name&quot;</span> <span class="token comment">-- Change this one</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">(</span>data_length <span class="token operator">+</span> index_length<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="backup"><a href="#backup" aria-hidden="true" class="header-anchor">#</a> Backup</h1> <p>To do this, we use the <code>mysqldump</code> command which creates a file with the SQL statements necessary to re -create the database. Use <code>--databases</code> in order to have <code>CREATE TABLE IF NOT EXIST</code> included in the dump.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mysqldump --add-drop-table --databases dbName <span class="token operator">&gt;</span> backup.sql

<span class="token comment"># Simplest command.</span>
mysqldump --databases dbName <span class="token operator">&gt;</span> backup.sql

<span class="token comment"># Multiple databases.</span>
mysqldump --databases db1 db2 <span class="token operator">&gt;</span> backup.sql

<span class="token comment"># Everything.</span>
mysqldump --all-databases <span class="token operator">&gt;</span> backup.sql

<span class="token comment"># Prompt for password.</span>
mysqldump -p --databases dbName <span class="token operator">&gt;</span> backup.sql

<span class="token comment"># Options</span>

<span class="token comment"># add a DROP TABLE statement before each CREATE TABLE.</span>
--add-drop-table

<span class="token comment"># Only database structure, without contents.</span>
--no-data
</code></pre></div><h2 id="restore"><a href="#restore" aria-hidden="true" class="header-anchor">#</a> Restore</h2> <p>If the dump was created without using <code>--databases</code>, then the database must be manually created before restoring. Also, the database must be specified with <code>mysql dbName &lt; backup.sql</code>. Otherwise, just use:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Restore a database.</span>
mysql <span class="token operator">&lt;</span> backup.sql

<span class="token comment"># Prompt for password.</span>
mysql -p <span class="token operator">&lt;</span> backup.sql

<span class="token comment"># From a compressed file.</span>
<span class="token function">gzip</span> -d <span class="token operator">&lt;</span> backup.sql.gz <span class="token operator">|</span> mysql

<span class="token comment"># If the database already exists and we want to restore it.</span>
mysql dbName <span class="token operator">&lt;</span> backup.sql
</code></pre></div><h1 id="mysql-workbench"><a href="#mysql-workbench" aria-hidden="true" class="header-anchor">#</a> MySQL Workbench</h1> <h2 id="creating-a-database"><a href="#creating-a-database" aria-hidden="true" class="header-anchor">#</a> Creating a Database</h2> <ol><li>Create a localhost connection as root on port 3306.</li> <li>Create a model <strong>AND</strong> name it.</li> <li>Forward Engineer the model in the localhost connection.</li> <li>Find the created database and populate it.</li></ol> <h2 id="terminology"><a href="#terminology" aria-hidden="true" class="header-anchor">#</a> Terminology</h2> <p><code>Model</code> holds all the schemas. There can be many modes, and each can have many schemas.</p> <p><code>Schema</code> is the overall design of the database which defines the tables, number of columns, foreign keys... This rarely changed, if at all...</p> <p><code>EER Diagram</code> is a visual representation of a schema with boxes for tables and lines for table relations.</p> <p><code>Database</code> is an instance of a schema. It's also where the data lives.</p> <p>A database is created by forward engineering a schema. An existing database is expanded with the new schema objects, but it does not alter the existing ones.</p> <p>To overwrite them, the tables need to be dropped first, which is an option during the forward engineering.</p> <p><code>Meta-data</code> is data about the database i.e. where the schema is stored.</p> <h1 id="tuning"><a href="#tuning" aria-hidden="true" class="header-anchor">#</a> Tuning</h1> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mysqltuner
</code></pre></div><p>It's a utility used to find out what could be done in order to optimize MySQL for the hardware and workload.</p> <p>It needs a bit of data to work properly, so a period should pass before running it, as it looks for usage patterns.</p> <p>To run it, just use <code>mysqltuner</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notes/topics/filesystem.html" class="prev">
          Filesystem
        </a></span> <span class="next"><a href="/notes/topics/react.html">
          React
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.b2f0b337.js" defer></script><script src="/notes/assets/js/2.1225d179.js" defer></script><script src="/notes/assets/js/38.ea35f119.js" defer></script>
  </body>
</html>
